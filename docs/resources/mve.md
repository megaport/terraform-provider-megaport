---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "megaport_mve Resource - terraform-provider-megaport"
subcategory: ""
description: |-
  Megaport Virtual Edge (MVE) Resource for Megaport Terraform provider. This resource allows you to create, modify, and delete Megaport MVEs. Megaport Virtual Edge (MVE) is an on-demand, vendor-neutral Network Function Virtualization (NFV) platform that provides virtual infrastructure for network services at the edge of Megaport’s global software-defined network (SDN). Network technologies such as SD-WAN and NGFW are hosted directly on Megaport’s global network via Megaport Virtual Edge.
---

# megaport_mve (Resource)

Megaport Virtual Edge (MVE) Resource for Megaport Terraform provider. This resource allows you to create, modify, and delete Megaport MVEs. Megaport Virtual Edge (MVE) is an on-demand, vendor-neutral Network Function Virtualization (NFV) platform that provides virtual infrastructure for network services at the edge of Megaport’s global software-defined network (SDN). Network technologies such as SD-WAN and NGFW are hosted directly on Megaport’s global network via Megaport Virtual Edge.

## Example Usage

```terraform
data "megaport_mve_images" "aruba" {
  vendor_filter = "Aruba"
  id_filter     = 23
}

resource "megaport_mve" "mve_aruba" {
  product_name         = "Megaport MVE Example"
  location_id          = 6
  contract_term_months = 1

  vnics = [
    {
      description = "Data Plane"
    },
    {
      description = "Control Plane"
    },
    {
      description = "Management Plane"
    }
  ]

  vendor_config = {
    vendor       = "aruba"
    product_size = "MEDIUM"
    image_id     = data.megaport_mve_images.aruba.mve_images.0.id
    account_name = "Aruba Test Account"
    account_key  = "12345678"
    system_tag   = "Preconfiguration-aruba-test-1"
  }
}

data "megaport_mve_images" "aviatrix" {
  vendor_filter = "Aviatrix"
  id_filter     = 70
}

# Sample Cloud Init Config for Aviatrix Edge - EXAMPLE ONLY
# cloud-config
# users:
# - lock-passwd: false
#   name: admin
#   passwd: $6$example$XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
# write_files:
# - content: '{"gateway_name": "EXAMPLE-GW", "controller_ip": "10.0.0.1", "launch_version":
#     "7.0.0", "dhcp": "False", "edge": "True", "caag": "False", "mgmt_interface_name":
#     "eth2", "mgmt_ip": "$PUBLIC_ADDRESS_WITH_MASK", "mgmt_default_gateway": "$PUBLIC_GATEWAY",
#     "ssh_public_key": "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQCxample/DUMMY/KEY/PLACEHOLDER/VALUE/LONG/STRING/
#     example@localhost\n", "rollback": "False", "gateway_uuid": "00000000000000000000000000000000",
#     "trustdomain": "example.com", "trustbundle": "-----BEGIN CERTIFICATE-----\nEXAMPLE
#     CERTIFICATE PLACEHOLDER - REPLACE WITH YOUR ACTUAL CERTIFICATE\n-----END
#     CERTIFICATE-----\n", "tmp_svid": "-----BEGIN CERTIFICATE-----\nEXAMPLE
#     CERTIFICATE PLACEHOLDER - REPLACE WITH YOUR ACTUAL CERTIFICATE\n-----END
#     CERTIFICATE-----\n", "tmp_key": "-----BEGIN PRIVATE KEY-----\nEXAMPLE
#     PRIVATE KEY PLACEHOLDER - REPLACE WITH YOUR ACTUAL PRIVATE KEY\n-----END
#     PRIVATE KEY-----\n", "tmp_svid_expiry": "0000000000"}'
#   owner: ubuntu:ubuntu
#   path: /etc/cloudx/sample_config.cfg
#   permissions: '0755'

resource "megaport_mve" "mve_aviatrix" {
  product_name         = "Aviatrix-Edge"
  location_id          = 6
  contract_term_months = 12

  vendor_config = {
    vendor       = "aviatrix"
    image_id     = data.megaport_mve_images.aviatrix.mve_images.0.id
    product_size = "SMALL"
    mve_label    = "MVE 2/8"
    cloud_init   = "IyBjbG91ZC1jb25maWcKdXNlcnM6Ci0gbG9jay1wYXNzd2Q6IGZhbHNlCiAgbmFtZTogYWRtaW4KICBwYXNzd2Q6ICQ2JGV4YW1wbGUkWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYCndyaXRlX2ZpbGVzOgotIGNvbnRlbnQ6ICd7ImdhdGV3YXlfbmFtZSI6ICJFWEFNUExFLUdXIiwgImNvbnRyb2xsZXJfaXAiOiAiMTAuMC4wLjEiLCAibGF1bmNoX3ZlcnNpb24iOgogICAgIjcuMC4wIiwgImRoY3AiOiAiRmFsc2UiLCAiZWRnZSI6ICJUcnVlIiwgImNhYWciOiAiRmFsc2UiLCAibWdtdF9pbnRlcmZhY2VfbmFtZSI6CiAgICAiZXRoMiIsICJtZ210X2lwIjogIiRQVUJMSUNfQUREUkVTU19XSVRIX01BU0siLCAibWdtdF9kZWZhdWx0X2dhdGV3YXkiOiAiJFBVQkxJQ19HQVRFV0FZIiwKICAgICJzc2hfcHVibGljX2tleSI6ICJzc2gtcnNhIEFBQUFCM056YUMxeWMyRUFBQUFEQVFBQkFBQUJBUUN4YW1wbGUvRFVNTVkvS0VZL1BMQUNFSE9MREVSL1ZBTFVFL0xPTkcvU1RSSU5HLwogICAgZXhhbXBsZUBsb2NhbGhvc3RcbiIsICJyb2xsYmFjayI6ICJGYWxzZSIsICJnYXRld2F5X3V1aWQiOiAiMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAiLAogICAgInRydXN0ZG9tYWluIjogImV4YW1wbGUuY29tIiwgInRydXN0YnVuZGxlIjogIi0tLS0tQkVHSU4gQ0VSVElGSUNBVEUtLS0tLVxuRVhBTVBMRQogICAgQ0VSVElGSUNBVEUgUExBQ0VIT0xERVIgLSBSRVBMQUNFIFdJVEggWU9VUiBBQ1RVQUwgQ0VSVElGSUNBVEVcbi0tLS0tRU5ECiAgICBDRVJUSUZJQ0FURS0tLS0tXG4iLCAidG1wX3N2aWQiOiAiLS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tXG5FWEFNUExFCiAgICBDRVJUSUZJQ0FURSBQTEFDRUhPTERFUiAtIFJFUExBQ0UgV0lUSCBZT1VSIEFDVFVBTCBDRVJUSUZJQ0FURVxuLS0tLS1FTkQKICAgIENFUlRJRklDQVRFLS0tLS1cbiIsICJ0bXBfa2V5IjogIi0tLS0tQkVHSU4gUFJJVkFURSBLRVktLS0tLVxuRVhBTVBMRQogICAgUFJJVkFURSBLRVkgUExBQ0VIT0xERVIgLSBSRVBMQUNFIFdJVEggWU9VUiBBQ1RVQUwgUFJJVkFURSBLRVlcbi0tLS0tRU5ECiAgICBQUklWQVRFIEtFWS0tLS0tXG4iLCAidG1wX3N2aWRfZXhwaXJ5IjogIjAwMDAwMDAwMDAifScKICBvd25lcjogdWJ1bnR1OnVidW50dQogIHBhdGg6IC9ldGMvY2xvdWR4L3NhbXBsZV9jb25maWcuY2ZnCiAgcGVybWlzc2lvbnM6ICcwNzU1Jw==" # Base64 Encoded Cloud Init for Aviatrix Edge
  }
}

data "megaport_mve_images" "sixwind" {
  vendor_filter = "6wind"
}

# Example 1: 6WIND MVE with static vNICs configuration
# IMPORTANT: 6WIND requires a 2048-bit RSA SSH key. ED25519 and other key types are NOT supported.
# Generate a compatible key using: ssh-keygen -t rsa -b 2048 -C "your_email@example.com"
resource "megaport_mve" "mve_sixwind_static" {
  product_name         = "6WIND MVE Example - Static vNICs"
  location_id          = 6
  contract_term_months = 1

  vendor_config = {
    vendor       = "6wind"
    product_size = "SMALL"
    image_id     = data.megaport_mve_images.sixwind.mve_images[0].id
    # EXAMPLE RSA 2048-bit key - REPLACE WITH YOUR ACTUAL PUBLIC KEY
    ssh_public_key = "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDChMevHRnL3gDRXyGduArHROH8IkZhdVmVBLkR/0F6RhP7Jw6a8T3xGjFLvQj3jfvXDxKDfqRQvLLJ3CgqnLvHuQjVZ/vYGdFCCXSxYbg2fCj2VIUjPHOBqkBEG8a1HDx2P8qN6WD8nBHkLExampleKeyForDocumentationOnlyNotForUse example@example.com"
  }

  vnics = [
    {
      description = "ens4"
    },
    {
      description = "ens5"
    },
    {
      description = "ens6"
    },
    {
      description = "ens7"
    },
    {
      description = "ens8"
    }
  ]
}

# Example 2: 6WIND MVE with dynamic vNICs configuration using variables
# This pattern allows flexibility in the number of vNICs provisioned
variable "sixwind_vnic_count" {
  description = "Number of vNICs to provision for 6WIND MVE (1-5)"
  type        = number
  default     = 5
  validation {
    condition     = var.sixwind_vnic_count >= 1 && var.sixwind_vnic_count <= 5
    error_message = "vnic_count must be between 1 and 5"
  }
}

variable "sixwind_ssh_public_key" {
  description = "RSA 2048-bit SSH public key for 6WIND MVE (ED25519 not supported)"
  type        = string
  sensitive   = true
}

resource "megaport_mve" "mve_sixwind_dynamic" {
  product_name         = "6WIND MVE Example - Dynamic vNICs"
  location_id          = 3 # DigiCo Sydney SYD1 (Global Switch)	
  contract_term_months = 1

  vendor_config = {
    vendor         = "6wind"
    product_size   = "SMALL"
    image_id       = data.megaport_mve_images.sixwind.mve_images[0].id
    ssh_public_key = var.sixwind_ssh_public_key
  }

  # Dynamically generate vNICs based on the count variable
  # Interface names start at ens4 and increment (ens4, ens5, ens6, etc.)
  vnics = [for i in range(var.sixwind_vnic_count) : {
    description = "ens${i + 4}"
  }]
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `contract_term_months` (Number) The term of the contract in months: valid values are 1, 12, 24, 36, 48, and 60. To set the product to a month-to-month contract with no minimum term, set the value to 1.
- `location_id` (Number) The numeric location ID of the product. This value can be retrieved from the data source megaport_location.
- `product_name` (String) The name of the MVE.
- `vendor_config` (Attributes) The vendor configuration of the MVE. Vendor-specific information required to bootstrap the MVE. These values will be different for each vendor, and can include vendor name, size of VM, license/activation code, software version, and SSH keys. This field cannot be changed after the MVE is created and if it is modified, the MVE will be deleted and re-created. Imported MVEs do not have this field populated by the API, so the initially provided configuration will be ignored as it can't be verified to be correct. If the user wants to change the configuration after importing the resource, they can then do so by changing the field after importing the resource and running terraform apply. (see [below for nested schema](#nestedatt--vendor_config))

### Optional

- `cost_centre` (String) The cost centre of the MVE.
- `diversity_zone` (String) The diversity zone of the MVE.
- `promo_code` (String) Promo code is an optional string that can be used to enter a promotional code for the service order. The code is not validated, so if the code doesn't exist or doesn't work for the service, the request will still be successful.
- `resource_tags` (Map of String) The resource tags associated with the product.
- `vnics` (Attributes List) The network interfaces of the MVE. The number of elements in the array is the number of vNICs the user wants to provision. Description can be null. The maximum number of vNICs allowed is 5. If the array is not supplied (i.e. null), it will default to the minimum number of vNICs for the supplier - 2 for Palo Alto and 1 for the others. (see [below for nested schema](#nestedatt--vnics))

### Read-Only

- `admin_locked` (Boolean) Whether the MVE is admin locked.
- `attribute_tags` (Map of String) The attribute tags of the MVE.
- `buyout_port` (Boolean) Whether the port is buyout.
- `cancelable` (Boolean) Whether the MVE is cancelable.
- `company_name` (String) The company name of the MVE.
- `company_uid` (String) The company UID of the MVE.
- `contract_end_date` (String) The date the contract ends. This value is calculated by the Megaport API based on the contract start date and term. During import, this field may show as changing from unknown to its actual value - this is expected behavior.
- `contract_start_date` (String) The date the contract starts. This value is managed by the Megaport API and may be updated when the MVE is provisioned or when contract terms change. During import, this field may show as changing from unknown to its actual value - this is expected behavior.
- `create_date` (String) The date the MVE was created. This timestamp is set by the Megaport API at creation time. During import, this field may show as changing from unknown to its actual value - this is expected behavior.
- `created_by` (String) The user who created the MVE.
- `last_updated` (String) The last time the MVE was updated by the Terraform Provider.
- `live_date` (String) The date the MVE went live. This value is set by the Megaport API when the MVE becomes active. During import, this field may show as changing from unknown to its actual value - this is expected behavior.
- `locked` (Boolean) Whether the MVE is locked.
- `market` (String) The market the MVE is in.
- `marketplace_visibility` (Boolean) Whether the MVE is visible in the marketplace.
- `mve_size` (String) The size of the MVE.
- `product_id` (Number) The Numeric ID of the MVE.
- `product_type` (String) The type of product (MVE).
- `product_uid` (String) The unique identifier of the MVE.
- `provisioning_status` (String) The provisioning status of the MVE. This field represents the current state (e.g., CONFIGURED, LIVE, DECOMMISSIONED) and may transition through multiple states during the MVE lifecycle. During import, this field will populate from the API and may show as changing from unknown to its actual value on first apply - this is expected behavior.
- `secondary_name` (String) The secondary name of the MVE.
- `terminate_date` (String) The date the MVE will be or was terminated. This value is set by the Megaport API when termination is scheduled or completed. During import, this field may show as changing from unknown to its actual value - this is expected behavior.
- `usage_algorithm` (String) The usage algorithm of the MVE.
- `vendor` (String) The vendor of the MVE.
- `virtual` (Boolean) Whether the MVE is virtual.
- `vxc_auto_approval` (Boolean) Whether VXC is auto approved.
- `vxc_permitted` (Boolean) Whether VXC is permitted.

<a id="nestedatt--vendor_config"></a>
### Nested Schema for `vendor_config`

Required:

- `image_id` (Number) The image ID of the MVE. Indicates the software version.
- `product_size` (String) The product size for the vendor config. The size defines the MVE specifications including number of cores, bandwidth, and number of connections.
- `vendor` (String) The name of vendor of the MVE. Currently supported values: "6wind", "aruba", "aviatrix", "cisco", "fortinet", "palo_alto", "prisma", "versa", "vmware", "meraki".

Optional:

- `account_key` (String) The account key for the vendor config. Enter the Account Key from Aruba Orchestrator. The key is linked to the Account Name. Required for Aruba MVE.
- `account_name` (String) The account name for the vendor config. Enter the Account Name from Aruba Orchestrator. To view your Account Name, log in to Orchestrator and choose Orchestrator > Licensing | Cloud Portal. Required for Aruba MVE.
- `admin_password_hash` (String) The admin password hash for the vendor config. Required for Palo Alto MVE. Must be a SHA-256 crypt hash in the format "$5$<salt>$<hash>" (e.g., "$5$2833ea35$Pdyc6dKE8N/UBRge3QWDJJyotG3I59pxLJWVmcSQDdC"). On Linux/macOS, you can generate this using: "mkpasswd -m sha-256 'your_password'".
- `admin_ssh_public_key` (String) The admin SSH public key for the vendor config. Required for Cisco, Fortinet, and Vmware MVEs.
- `cloud_init` (String) The Base64 encoded cloud init file for the vendor config. The bootstrap configuration file. Required for Aviatrix and Cisco C8000v.
- `controller_address` (String) The controldler address for the vendor config. A FQDN (Fully Qualified Domain Name) or IPv4 address of your Versa Controller. Required for Versa MVE.
- `director_address` (String) The director address for the vendor config. A FQDN (Fully Qualified Domain Name) or IPv4 address of your Versa Director. Required for Versa MVE.
- `fmc_ip_address` (String) The FMC IP address for the vendor config. Required for Cisco FTDv (Firewall) MVE.
- `fmc_nat_id` (String) The FMC NAT ID for the vendor config. Required for Cisco FTDv (Firewall) MVE.
- `fmc_registration_key` (String) The FMC registration key for the vendor config. Required for Cisco FTDv (Firewall) MVE.
- `ion_key` (String) The vION key for the vendor config. Required for Prisma MVE.
- `license_data` (String) The license data for the vendor config. Required for Fortinet and Palo Alto MVEs.
- `local_auth` (String) The local auth for the vendor config. Enter the Local Auth string as configured in your Versa Director. Required for Versa MVE.
- `manage_locally` (Boolean) Whether to manage the MVE locally. Required for Cisco MVE.
- `mve_label` (String) The MVE label for the vendor config.
- `remote_auth` (String) The remote auth for the vendor config. Enter the Remote Auth string as configured in your Versa Director. Required for Versa MVE.
- `secret_key` (String) The secret key for the vendor config. Required for Prisma MVE.
- `serial_number` (String) The serial number for the vendor config. Enter the serial number that you specified when creating the device in Versa Director. Required for Versa MVE.
- `ssh_public_key` (String) The SSH public key for the vendor config. Required for 6WIND, VMWare, Palo Alto, and Fortinet MVEs. Must be a 2048-bit RSA key (ed25519 and other key types are not supported). You can generate a compatible key using: ssh-keygen -t rsa -b 2048 -C 'your_email@example.com'
- `system_tag` (String) The system tag for the vendor config. Aruba Orchestrator System Tags and preconfiguration templates register the EC-V with the Cloud Portal and Orchestrator, and enable Orchestrator to automatically accept and configure newly discovered EC-V appliances. If you created a preconfiguration template in Orchestrator, enter the System Tag you specified here. Required for Aruba MVE.
- `token` (String) The token for the vendor config. Required for Meraki MVE.
- `vco_activation_code` (String) The VCO activation code for the vendor config. This is provided by Orchestrator after creating the edge device. Required for VMware MVE.
- `vco_address` (String) The VCO address for the vendor config. A FQDN (Fully Qualified Domain Name) or IPv4 or IPv6 address for the Orchestrator where you created the edge device. Required for VMware MVE.


<a id="nestedatt--vnics"></a>
### Nested Schema for `vnics`

Required:

- `description` (String) The description of the network interface.

Read-Only:

- `vlan` (Number) The VLAN of the network interface.

## Import

Import is supported using the following syntax:

```shell
# Order can be imported by specifying the Product UID.
terraform import megaport_mve.example "<PRODUCT_UID>"
```
