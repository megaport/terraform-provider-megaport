---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "megaport_cloud_port_lookup Data Source - terraform-provider-megaport"
subcategory: ""
description: |-
  Cloud Port Lookup Data Source. Returns an array of ALL cloud service provider ports that match the specified criteria.
  This data source provides complete visibility into available cloud ports, returning multiple results for you to filter and select from based on your specific requirements.
  Unlike the legacy partner data source, this returns the full list of matching ports, giving you complete control over port selection.
---

# megaport_cloud_port_lookup (Data Source)

Cloud Port Lookup Data Source. Returns an array of ALL cloud service provider ports that match the specified criteria. 
This data source provides complete visibility into available cloud ports, returning multiple results for you to filter and select from based on your specific requirements.
Unlike the legacy partner data source, this returns the full list of matching ports, giving you complete control over port selection.

## Example Usage

```terraform
# Find all AWS ports in Sydney
data "megaport_cloud_port_lookup" "aws_ports_sydney" {
  connect_type = "AWS"
  location_id  = 3 # Sydney location
}

# Select the first available AWS port
locals {
  selected_aws_port = data.megaport_cloud_port_lookup.aws_ports_sydney.ports[0]
}

# Find AWS Hosted Connection ports in specific diversity zone
data "megaport_cloud_port_lookup" "aws_hc_red_zone" {
  connect_type   = "AWSHC"
  location_id    = 3
  diversity_zone = "red"
}

# Filter by company name and select based on custom criteria
data "megaport_cloud_port_lookup" "aws_company_specific" {
  connect_type = "AWS"
  company_name = "AWS"
  location_id  = 3
}

locals {
  # Select port with highest speed
  highest_speed_port = [
    for port in data.megaport_cloud_port_lookup.aws_company_specific.ports :
    port if port.speed == max([for p in data.megaport_cloud_port_lookup.aws_company_specific.ports : p.speed]...)
  ][0]

  # Select port containing "Sydney" in the name
  sydney_port = [
    for port in data.megaport_cloud_port_lookup.aws_company_specific.ports :
    port if contains(lower(port.product_name), "sydney")
  ][0]
}

# Example with secure ports (GCP with pairing key)
data "megaport_cloud_port_lookup" "gcp_secure_ports" {
  connect_type   = "GOOGLE"
  include_secure = true
  secure_key     = "your-gcp-pairing-key-here"
  location_id    = 3
}

# Use the cloud port in a VXC resource
resource "megaport_vxc" "aws_connection" {
  product_name         = "My AWS Connection"
  rate_limit           = 1000
  contract_term_months = 12

  a_end = {
    requested_product_uid = megaport_port.my_port.product_uid
  }

  b_end = {
    requested_product_uid = local.selected_aws_port.product_uid
  }

  b_end_partner_config = {
    partner = "aws"
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Optional

- `company_name` (String) Filter by the name of the company that owns the partner port.
- `connect_type` (String) The type of connection for the partner port. Filters by cloud provider connection types.
- `diversity_zone` (String) Filter by diversity zone (red or blue).
- `include_secure` (Boolean) Include secure partner ports (those requiring a secure_key). Defaults to false. When true, you must also provide a secure_key.
- `location_id` (Number) Filter by the unique identifier of the location.
- `secure_key` (String, Sensitive) Key required for looking up secure partner ports (pairing key for GCP, service key for Azure/Oracle/IBM). Only used when include_secure is true and connect_type is GOOGLE, AZURE, ORACLE or IBM.
- `vxc_permitted` (Boolean) Filter by whether VXCs are permitted on the port. Defaults to true if not specified.

### Read-Only

- `ports` (Attributes List) List of ALL matching cloud ports. You can use Terraform's for expressions and conditionals to filter this list based on your specific requirements (e.g., by name patterns, speed, rank, etc.). (see [below for nested schema](#nestedatt--ports))

<a id="nestedatt--ports"></a>
### Nested Schema for `ports`

Read-Only:

- `company_name` (String) The name of the company that owns the partner port.
- `company_uid` (String) The unique identifier of the company that owns the partner port.
- `connect_type` (String) The type of connection for the partner port.
- `diversity_zone` (String) The diversity zone of the partner port.
- `is_secure` (Boolean) Whether this is a secure partner port requiring a key.
- `location_id` (Number) The unique identifier of the location of the partner port.
- `product_name` (String) The name of the partner port.
- `product_uid` (String) The unique identifier of the partner port.
- `rank` (Number) The rank of the partner port (lower is better).
- `secure_key` (String, Sensitive) Key for secure partner ports (pairing key for GCP, service key for Azure/Oracle/IBM).
- `speed` (Number) The speed of the partner port in Mbps.
- `vlan` (Number) VLAN ID for secure partner ports (if available from the API response).
- `vxc_permitted` (Boolean) Whether VXCs are permitted on the partner port.
